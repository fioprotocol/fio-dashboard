import fs from 'fs';
import path from 'path';

import handlebars from 'handlebars';

const emailTemplatesPath = path.resolve('server/src/emails/');

export const templates = {
  createAccount: 'createAccount',
  confirmEmail: 'confirmEmail',
  passRecovery: 'passRecovery',
  approveFioRequest: 'approveFioRequest',
  rejectFioRequest: 'rejectFioRequest',
  newFioRequest: 'newFioRequest',
  balanceChange: 'balanceChange',
  expiringDomains: 'expiringDomains',
  lowBundleCount: 'lowBundleCount',
};

const FIO_LOGO_BASE64 =
  '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';

class EmailTemplate {
  constructor() {}

  get(templateName, params) {
    const source = fs.readFileSync(
      `${emailTemplatesPath}/${templateName}/${templateName}.hbs`,
      'utf-8',
    );
    const template = handlebars.compile(source);

    return template(params);
  }

  getInlineImages(templateName) {
    const fioLogo = {
      type: `image/png`,
      name: 'fiologo.png',
      content: FIO_LOGO_BASE64,
    };
    const images = [];

    switch (templateName) {
      default:
      //
    }

    return [...images, fioLogo];
  }
}

export default new EmailTemplate();
